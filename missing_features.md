# SemiTerm 設計ドキュメントと実装の差分

設計ドキュメントと現在のソースコードを比較し、実装が必要な項目、または実装が不完全な項目を以下にまとめます。

## 1. SSHコンポーネント (Mainプロセス)

- **[完了] SSH接続ロジック**: `main/index.ts` の `ipcMain.on('ssh:connect', ...)` 内で、`ssh2` を用いた実際の接続処理を実装する必要があります。
- **[完了] データ送受信ロジック**: SSHセッションとRendererプロセス間でのデータ中継（`ssh:data`, `ssh:write`）を実装する必要があります。
- **[完了] Keepalive設定**: 設計書で定められたKeepalive（10〜30秒）を接続時に有効化する必要があります。
- **[完了] 接続タイムアウト設定**: 10秒の接続タイムアウト処理を実装する必要があります。
- **[完了] エラーハンドリング**: 接続エラー発生時に、エラー情報をRendererプロセスに通知する仕組み（`ssh:error` イベントの発行）を実装する必要があります。
- **[完了] セッション破棄**: タブが閉じられた際に、対応するSSHセッションを破棄するロジック（`ipcMain.on('ssh:close', ...)`）を実装する必要があります。

## 2. UI / タブ管理 (Rendererプロセス)

- **[完了] xterm.jsの統合**: 各タブ内に `xterm.js` のインスタンスを生成し、ターミナルとして機能させる必要があります。現在は静的なテキストが表示されています。
- **[完了] xterm.jsのスタイリングと設定**: 設計書に記載のフォント、カラーテーマ（OS追従）、行バッファ数などの設定を適用する必要があります。
- **[完了] タブ名のフォーマット**: 現在は `{連番} - {接続名}` となっています。設計書通り `{連番} - {ホスト名}` に修正する必要があります。
- **[未実装] タブを閉じる機能**: タブの `×` ボタンと、キーボードショートカット `Ctrl+W` によるタブクローズ機能を実装する必要があります。
- **[未実装] 下部ステータスバー**: 接続状態、ログレベル、ホスト名を表示するためのフッターコンポーネントがありません。
- **[不完全] UIスタイルの詳細**: 設計書で指定されている背景色（例: `#F5F7FA`）、アクティブタブのハイライト色（例: `#D0E8FF`）などが現在のダークテーマ実装と異なります。ライト/ダークテーマの切り替え、または指定色の適用が必要です。
- **[未実装] 接続エラーのUI表示**: 接続失敗時に、タブ内にエラーメッセージと再接続ボタンを表示する専用パネルを実装する必要があります。

## 3. データ管理とログ

- **[完了] ログ出力処理**: `main/index.ts` 内で `electron-log` を利用し、SSH接続のライフサイクルやエラーイベントをファイルに記録する処理を追加する必要があります。
- **[完了] ログ設定**: ログレベルを `debug` に設定し、日別のフォルダにログをローテーションする設定を `electron-log` に適用する必要があります。
- **[完了] パスワードの非保存**: 現在、Rendererから渡された接続情報がそのまま保存されています。`main` プロセスの保存処理 (`db:save-connection`) で、パスワード情報が永続化されないように徹底する必要があります。
- **[未実装] プロファイルのインポート/エクスポート**: 接続情報リストをJSONファイルとしてインポート・エクスポートする機能が未実装です。

## 4. ウィンドウ管理とその他機能

- **[不完全] シングルインスタンス化**: `app.requestSingleInstanceLock()` を呼び出し、アプリが複数起動しないようにする必要があります。
- **[未実装] ウィンドウサイズ復元**: `electron-store` などを用いて、前回終了時のウィンドウサイズを保存・復元する機能を実装する必要があります。
- **[未実装] キーボードショートカット**: 以下のショートカットを実装する必要があります。
    - `Ctrl+T`: 新規接続タブを開く
    - `Ctrl+W`: 現在のタブを閉じる
    - `Ctrl+Tab`: タブを切り替える
    - `Ctrl+R`: 再接続
- **[未実装] アプリロゴの表示**: 設計書に基づき、ウィンドウ左上やサイドバー上部にロゴを配置する必要があります。
